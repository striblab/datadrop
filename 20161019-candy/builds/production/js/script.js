!function t(o,e,n){function i(a,l){if(!e[a]){if(!o[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=e[a]={exports:{}};o[a][0].call(s.exports,function(t){var e=o[a][1][t];return i(e||t)},s,s.exports,t,o,e,n)}return e[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,o,e){d3.json("./data/candy.json",function(t,o){var e=o.candy;d3.json("./shapefiles/metrocandy.json",function(t,o){d3.json("./shapefiles/metro_cities.json",function(t,n){d3.json("./shapefiles/counties.json",function(t,i){function r(t,o){d.textContent=e[t].title,$("#location-description").html(e[t].description),$(".stat").html(e[t].stat),$(".trackDot").removeClass("current"),$("#d"+t).addClass("current"),u.flyTo({center:[e[t].longitude,e[t].latitude],zoom:e[t].zoom,bearing:e[t].bearing,pitch:e[t].pitch}),console.log(t),0==t?$(window).width()<700&&(u.flyTo({center:[-93.266667,44.983333],zoom:7.3}),u.setLayoutProperty("counties-layer","visibility","visible")):u.setLayoutProperty("counties-layer","visibility","none")}function a(t,o){y[t]=window.setTimeout(function(){r(t)},o)}function l(){for(var t=0;t<e.length;t++)clearTimeout(y[t])}var c=new mapboxgl.LngLat(-93.716125,44.643254),s=new mapboxgl.LngLat(-92.763062,45.350215);new mapboxgl.LngLatBounds(c,s);mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var u=new mapboxgl.Map({container:"map",style:"mapbox://styles/shadowflare/ciqznymjs0009btm891qyu49n",center:[-93.924866,44.995883],zoom:8,minZoom:7.5}),d=document.getElementById("location-title"),f=document.getElementById("location-description"),y=[];d.textContent=e[e.length-1].title,f.textContent=e[e.length-1].description,u.on("load",function(){u.addSource("blocks",{type:"geojson",data:o}),u.addLayer({id:"blocks-layer",interactive:!0,source:"blocks",layout:{},type:"fill",paint:{"fill-color":{property:"CandyScore",stops:[[0,"#333"],[16,"#fdd49e"],[20,"#fdbb84"],[30,"#FC8D59"],[40,"#e34a33"],[50,"#b30000"]]},"fill-opacity":.6}},"place-neighbourhood"),u.addSource("metro",{type:"geojson",data:n}),u.addLayer({id:"metro-layer",interactive:!0,source:"metro",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.2,"fill-color":"#888","fill-outline-color":"rgba(255, 255, 255, 1)"}},"place-neighbourhood"),u.addSource("counties",{type:"geojson",data:i}),u.addLayer({id:"counties-layer",interactive:!1,source:"counties",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.1,"fill-color":"#888","fill-outline-color":"rgba(255, 255, 255, 1)"}},"place-neighbourhood");var t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});u.on("mousemove",function(o){var e=u.queryRenderedFeatures(o.point,{layers:["metro-layer"]});if(u.getCanvas().style.cursor=e.length?"pointer":"",!e.length)return void t.remove();var n=e[0];t.setLngLat(o.lngLat).setHTML(n.properties.COCTU_DESC).addTo(u)}),r(0),$("#info").show();var c=0;$(document).ready(function(){$("#toggle").bind("click",function(){if("play myButton2"==$(this).attr("class")){$(this).attr("class","pause myButton2"),$(this).html("&#9724;");for(var t=0;t<e.length;t++)a(t,5e3*t),c<e.length&&c++}else $(this).attr("class","play myButton2"),$(this).html("&#9658;"),l()})}),$(".previous").click(function(){c>0&&(c--,l(),r(c))}),$(".next").click(function(){c<e.length-1&&(l(),c++,r(c))}),$(".trackDot").click(function(){$("#toggle").attr("class","play myButton2"),$("#toggle").html("&#9658;"),$(".trackDot").removeClass("current"),$(this).addClass("current"),l(),c=Number($(this).attr("index")),r(Number($(this).attr("index")))}),$(document).ready(function(){$(window).width()<=770?u.flyTo({center:[-93.266667,44.983333],zoom:7.3}):u.flyTo({center:[-93.924866,44.995883],zoom:8})}),$(window).resize(function(){$(window).width()<=770?u.flyTo({center:[-93.266667,44.983333],zoom:7.3}):u.flyTo({center:[-93.924866,44.995883],zoom:8})}),$(".zoom").click(function(){u.flyTo({center:[-93.924866,44.995883],zoom:8.5})})})})})})})},{}]},{},[1]);