!function e(o,t,r){function n(a,s){if(!t[a]){if(!o[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=t[a]={exports:{}};o[a][0].call(l.exports,function(e){var t=o[a][1][e];return n(t||e)},l,l.exports,e,o,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,o,t){$.urlParam=function(e){var o=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=o?o[1]||0:null};var r=$.urlParam("chart");null!=r&&($(".slide").hide(),$("#"+r).show()),d3.json("./shapefiles/minneapolis_nb.json",function(e,o){d3.json("./data/shootings.json",function(e,t){d3.json("./data/ranking.json",function(e,r){function n(e,o,t,r,n){d3.select(e).selectAll(".row").sort(function(e,o){if("neighborhood"==r){if("descend"==n)return d3.descending(e.neighborhood,o.neighborhood);if("ascend"==n)return d3.ascending(e.neighborhood,o.neighborhood)}if("rate"==r){if("descend"==n)return d3.descending(e.rate,o.rate);if("ascend"==n)return d3.ascending(e.rate,o.rate)}if("shooting"==r){if("descend"==n)return d3.descending(e.shooting,o.shooting);if("ascend"==n)return d3.ascending(e.shooting,o.shooting)}}).transition().duration(500)}var i=r.ranking;!function(){d3.select("#chart").selectAll(".row").data(i).enter().append("div").attr("class","row").style("background-color",function(e){return e.rate>=30?"#99000d":e.rate>=20?"#cb181d":e.rate>=10?"#ef3b2c":e.rate>=8?"#fb6a4a":e.rate>=6?"#fc9272":e.rate>=4?"#fcbba1":e.rate>=1?"#fee0d2":e.rate>=0?"#dddddd":void 0}).attr("latitude",function(e){return e.latitude}).attr("longitude",function(e){return e.longitude}).on("mousedown",function(e){$(".districtName").html(e.neighborhood),a.flyTo({center:[e.longitude,e.latitude],zoom:13})}).html(function(e,o){return"<div class='cell neighborhood'>"+e.neighborhood+"</div><div class='cell rate'>"+d3.format(".1f")(e.rate)+"</div><div class='cell shootings'>"+e.shooting+"</div>"})}(),$(document).ready(function(){$(".row").click(function(){$(".row").removeClass("rowSelect"),$(this).addClass("rowSelect")}),$(".hSort").click(function(){if($(".hSort").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("selected")){$(this).addClass("toggled");var e="descend"}n("#chart",null,i,$(this).attr("data"),e)}),$("#filter_box").on("keyup search",function(e){$(".row").hide();var o=$("#filter_box").val();$(".row").each(function(){-1!=$(this).text().toUpperCase().indexOf(o.toUpperCase())&&$(this).show()})}),$(".scrollToTop").click(function(){return $(".row").show(),$("#filter_box").val(""),a.flyTo({center:[-93.264313,44.973269],zoom:10}),$("#chart").animate({scrollTop:0},800),!1})}),mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var a=new mapboxgl.Map({container:"map",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-93.264313,44.973269],zoom:10,minZoom:10,hash:!1});a.addControl(new mapboxgl.NavigationControl),a.scrollZoom.disable(),a.doubleClickZoom.disable(),a.on("load",function(){a.addSource("nb",{type:"geojson",data:o}),a.addLayer({id:"nb-layer",interactive:!0,source:"nb",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":1,"fill-color":{property:"maindata_rate",stops:[[0,"#dddddd"],[1,"#fee0d2"],[4,"#fcbba1"],[6,"#fc9272"],[8,"#fb6a4a"],[10,"#ef3b2c"],[20,"#cb181d"],[30,"#99000d"]]},"fill-outline-color":"rgba(255, 255, 255, 1)"}},"place-neighbourhood"),a.addSource("shootings",{type:"geojson",data:t}),a.addLayer({id:"shootings-layer",type:"circle",source:"shootings",paint:{"circle-radius":3,"circle-color":"rgba(150, 150, 150, 0.8)"},filter:["==","WeaponCategory","UNARMED"]}),a.addLayer({id:"shootings-layer2",type:"circle",source:"shootings",paint:{"circle-radius":3,"circle-color":"rgba(66, 134, 244, 0.8)"},filter:["!=","WeaponCategory","UNARMED"]});var e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});a.on("mousemove",function(o){var t=a.queryRenderedFeatures(o.point,{layers:["shootings-layer","shootings-layer2"]});if(a.getCanvas().style.cursor=t.length?"pointer":"",!t.length)return void e.remove();var r=t[0];e.setLngLat(o.lngLat).setHTML("<div>"+r.properties.FirstName+" "+r.properties.LastName+"</div><div>died in "+r.properties.year+"</div><div>"+r.properties.WeaponCategory+"</div>").addTo(a)})}),function(){c3.generate({bindto:"#raceChart",padding:{top:20,right:60,bottom:20,left:80},data:{columns:[["Deaths",.172,.62,.068,.068,.068],["Minneapolis",.64,.186,.56,.02,.105]],type:"bar"},legend:{show:!1},color:{pattern:["#ef3b2c","#333333"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,format:d3.format("%.0f"),values:[0,.25,.5,.75,1]}},x:{type:"category",tick:{rotate:-60,multiline:!1},height:40,categories:["White","Black","Asian","Native","Hispanic"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}()})})})},{}]},{},[1]);