!function t(e,r,o){function a(i,s){if(!r[i]){if(!e[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return a(r?r:t)},c,c.exports,t,e,r,o)}return r[i].exports}for(var n="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(t,e,r){$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var o=$.urlParam("chart");null!=o&&($(".slide").hide(),$("#"+o).show()),d3.json("./data/index.json",function(t,e){function r(t,e,r){var o=0,a="NO",n="NO",i="NO",s="NO",c="NO",d="NO",p="NO",u="";if("personal"==e)for(var f=0;f<l.length;f++)if(l[f].county==t.properties.COUNTYNAME){l[f].pincomeDIFF>=15?u="gray4":l[f].pincomeDIFF>=10?u="gray3":l[f].pincomeDIFF>=5?u="gray2":l[f].pincomeDIFF>=0&&(u="gray1"),o=l[f].pincomeDIFF/100;break}if("household"==e||"trump"==e)for(var f=0;f<l.length;f++)if(l[f].county==t.properties.COUNTYNAME){l[f].mincomeDIFF>=9?u="gray4":l[f].mincomeDIFF>=6?u="gray3":l[f].mincomeDIFF>=3?u="gray2":l[f].mincomeDIFF>=0&&(u="gray1"),l[f].mincomeDIFF<=-9?u="red4":l[f].mincomeDIFF<=-6?u="red3":l[f].mincomeDIFF<=-3?u="red2":l[f].mincomeDIFF<0&&(u="red1"),o=l[f].mincomeDIFF/100;break}if("indexed"==e)for(var f=0;f<l.length;f++)if(l[f].county==t.properties.COUNTYNAME){o=l[f].index,1==l[f].poverty&&(a="YES"),1==l[f].jobs&&(n="YES"),1==l[f].household&&(i="YES"),1==l[f].personal&&(s="YES"),1==l[f].hpi&&(c="YES"),1==l[f].unemployment&&(d="YES"),1==l[f].tax&&(p="YES");break}return"indexed"!=e?"<div class='districtName'>"+t.properties.COUNTYNAME+" County</div><div class='population "+u+"'>"+d3.format("+%")(o)+" change</div>":"<div class='districtName'>"+t.properties.COUNTYNAME+" County</div><div class='indicators "+u+"'>"+o+" indicators above avg</div><div class='label'>Poverty:</div><div class='stat'>"+a+"</div><div class='label'>Jobs:</div><div class='stat'>"+n+"</div><div class='label'>Unemployment:</div><div class='stat'>"+d+"</div><div class='label'>Household inc:</div><div class='stat'>"+i+"</div><div class='label'>Personal inc:</div><div class='stat'>"+s+"</div><div class='label'>Housing:</div><div class='stat'>"+c+"</div>"}function o(t,e,o,a,n,i,s,c){function d(t){var e,r,o;if(t&&p!==t){var a=v.centroid(t);e=a[0],r=a[1],o=1,p=t}else e=u/2,r=f/2,o=1,p=null;h.selectAll("path").classed("faded",!1).classed("active",p&&function(t){return t===p})}var p,u=320,f=400;if("us"==i)var m=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==i)var m=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==i)var m=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var v=d3.geo.path().projection(m),g=d3.select(t+" svg").attr("width",u).attr("height",f);g.append("rect").attr("class","background").attr("width",u).attr("height",f);var h=g.append("g");d3.json("shapefiles/"+a,function(t,e){h.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",v).attr("id",function(t){var e=i+"_"+t.properties.DISTRICT;return e.replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(t){return t.properties.DISTRICT}).attr("class",function(t){if("personal"==n)for(var e=0;e<l.length;e++)if(l[e].county==t.properties.COUNTYNAME){if(l[e].pincomeDIFF>=18)return"gray4";if(l[e].pincomeDIFF>=12)return"gray3";if(l[e].pincomeDIFF>=6)return"gray2";if(l[e].pincomeDIFF>=0)return"gray1"}if("household"==n)for(var e=0;e<l.length;e++)if(l[e].county==t.properties.COUNTYNAME){if(l[e].mincomeDIFF>=3)return"gray3";if(l[e].mincomeDIFF<3)return"red3"}if("trump"==n){for(var e=0;e<l.length;e++)if(l[e].county==t.properties.COUNTYNAME&&"YES"==l[e].FLIP){if(l[e].mincomeDIFF>=3)return"gray3";if(l[e].mincomeDIFF<3)return"red3"}return"none"}if("indexed"==n)for(var e=0;e<l.length;e++)if(l[e].county==t.properties.COUNTYNAME){if(l[e].index>=5)return"gray5";if(l[e].index>=4)return"gray4";if(l[e].index>=3)return"gray2";if(l[e].index>=0)return"gray1"}}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){if("index"!=n)return r(t,n,s)})),h.append("path").attr("id","state-borders").attr("d",v)});d3.behavior.zoom().on("zoom",function(){h.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),h.selectAll("circle").attr("d",v.projection(m)),h.selectAll("path").attr("d",v.projection(m))});$(".zoom, .switch, #close, .mapSwitch").click(function(){d(),$("#filter input").val(""),$(".district").removeClass("selected"),$("#infobox").hide(),d3.selectAll(".map rect").classed("faded",!1),d3.selectAll(".map rect").classed("active",!1),$(".rightSide").show()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}function a(){c3.generate({bindto:"#gapChart",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["METRO",49736,50015,49872,50514,51827,51155,51901,52657,52146,49111,49577,50929,52258,51607,53349,55295],["OUTSTATE",33821,34451,34921,36379,37199,36578,36261,37122,39694,38253,39549,41267,43923,43857,42696,44266]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"avg personal income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function n(){c3.generate({bindto:"#gapChart2",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["Metro",85681,80606,80092,78879,76225,74937,73821,74855,75324,75953,78877],["Outstate",54366,52031,52356,52312,51615,50994,50809,51399,52487,52721,53743]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"median household income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function i(){c3.generate({bindto:"#taxChart",padding:{top:20,right:60,bottom:20,left:120},data:{columns:[["METRO",2914,3280,3540],["OUTSTATE",1920,2218,2368]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"taxes per capita",position:"outer-middle"}},x:{type:"category",categories:["2009-2010","2011-2012","2012-2013"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function s(){c3.generate({bindto:"#regionChart",padding:{top:20,right:60,bottom:20,left:120},data:{columns:[["income % change",.131812242,.083172603,.038747892,.034280751,.033496606,.032609226,.024379787,.008856891]],type:"bar"},color:{pattern:["#333333"]},axis:{rotated:!0,y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("%")}},x:{type:"category",categories:["West Central","Northwest","Northland","Central","Southwest","Minnesota","Twin Cities","Southern"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}var l=e.incomes;d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,o=d3.select("body").node();e.on("mouseover",function(e,a){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var n=d3.mouse(o);r.style("left",n[0]+10+"px").style("top",n[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,a)||""}).on("mousemove",function(e,a){var n=d3.mouse(o);r.style("left",n[0]+10+"px").style("top",n[1]-15+"px");var i=t(e,a)||"";r.html(i)}).on("mouseout",function(t,e){r.remove()})}},o("#mapHousehold","#infobox","#chart","counties.json","household","mn",null,0),o("#mapPersonal","#infobox","#chart","counties.json","personal","mn",null,0),o("#mapIndex","#infobox","#chart","counties.json","indexed","mn",null,0),o("#mapTrump","#infobox","#chart","counties.json","trump","mn",null,0),a(),n(),i(),s()})},{}]},{},[1]);