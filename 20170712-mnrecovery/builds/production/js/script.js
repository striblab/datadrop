!function t(e,r,a){function n(o,s){if(!r[o]){if(!e[o]){var d="function"==typeof require&&require;if(!s&&d)return d(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return n(r?r:t)},c,c.exports,t,e,r,a)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(t,e,r){$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var a=$.urlParam("chart");null!=a&&($(".slide").hide(),$("#"+a).show()),d3.json("./data/incomes.json",function(t,e){function r(t,e,r){var a=0,n="";if("personal"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].pincomeDIFF>=15?n="gray4":d[i].pincomeDIFF>=10?n="gray3":d[i].pincomeDIFF>=5?n="gray2":d[i].pincomeDIFF>=0&&(n="gray1"),a=d[i].pincomeDIFF/100;break}if("household"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].mincomeDIFF>=9?n="gray4":d[i].mincomeDIFF>=6?n="gray3":d[i].mincomeDIFF>=3?n="gray2":d[i].mincomeDIFF>=0&&(n="gray1"),d[i].mincomeDIFF<=-9?n="red4":d[i].mincomeDIFF<=-6?n="red3":d[i].mincomeDIFF<=-3?n="red2":d[i].mincomeDIFF<0&&(n="red1"),a=d[i].mincomeDIFF/100;break}if("index"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].FULLINDEX>=120?n="gray4":d[i].FULLINDEX>=80?n="gray3":d[i].FULLINDEX>=40?n="gray2":d[i].FULLINDEX>=0?n="gray1":d[i].FULLINDEX<=-15?n="red4":d[i].FULLINDEX<=-7?n="red3":d[i].FULLINDEX<=-3?n="red2":d[i].FULLINDEX<=0&&(n="red1"),a=d[i].FULLINDEX/100;break}if("trump"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].pincomeDIFF>=15?n="gray4":d[i].pincomeDIFF>=10?n="gray3":d[i].pincomeDIFF>=5?n="gray2":d[i].pincomeDIFF>=0&&(n="gray1"),a=d[i].pincomeDIFF/100;break}if("taxes"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].taxDIFF>=100?n="gray4":d[i].taxDIFF>=50?n="gray3":d[i].taxDIFF>=30?n="gray2":d[i].taxDIFF>0?n="gray1":d[i].taxDIFF<=-30?n="red4":d[i].taxDIFF<=-20?n="red3":d[i].taxDIFF<=-10?n="red2":d[i].taxDIFF<=0&&(n="red1"),a=d[i].taxDIFF/100;break}if("aids"==e)for(var i=0;i<d.length;i++)if(d[i].county==t.properties.COUNTYNAME){d[i].aidsDIFF>=100?n="gray4":d[i].aidsDIFF>=50?n="gray3":d[i].aidsDIFF>=30?n="gray2":d[i].aidsDIFF>0?n="gray1":d[i].aidsDIFF<=-30?n="red4":d[i].aidsDIFF<=-20?n="red3":d[i].aidsDIFF<=-10?n="red2":d[i].aidsDIFF<=0&&(n="red1"),a=d[i].aidsDIFF/100;break}return"<div class='districtName'>"+t.properties.COUNTYNAME+" County</div><div class='population "+n+"'>"+d3.format("+%")(a)+" change</div>"}function a(t,e,a,n,i,o,s,c){function l(t){var e,r,a;if(t&&f!==t){var n=m.centroid(t);e=n[0],r=n[1],a=1,f=t}else e=u/2,r=p/2,a=1,f=null;I.selectAll("path").classed("faded",!1).classed("active",f&&function(t){return t===f})}var f,u=320,p=400;if("us"==o)var F=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==o)var F=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==o)var F=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var m=d3.geo.path().projection(F),g=d3.select(t+" svg").attr("width",u).attr("height",p);g.append("rect").attr("class","background").attr("width",u).attr("height",p);var I=g.append("g");d3.json("shapefiles/"+n,function(t,e){I.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",m).attr("id",function(t){var e=o+"_"+t.properties.DISTRICT;return e.replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(t){return t.properties.DISTRICT}).attr("class",function(t){if("personal"==i)for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME){if(d[e].pincomeDIFF>=18)return"gray4";if(d[e].pincomeDIFF>=12)return"gray3";if(d[e].pincomeDIFF>=6)return"gray2";if(d[e].pincomeDIFF>=0)return"gray1"}if("household"==i)for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME){if(d[e].mincomeDIFF>=3)return"gray3";if(d[e].mincomeDIFF<3)return"red3"}if("index"==i)for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME){if(d[e].FULLINDEX>=120)return"gray4";if(d[e].FULLINDEX>=80)return"gray3";if(d[e].FULLINDEX>=40)return"gray2";if(d[e].FULLINDEX>=0)return"gray1";if(d[e].FULLINDEX<=-15)return"red4";if(d[e].FULLINDEX<=-7)return"red3";if(d[e].FULLINDEX<=-3)return"red2";if(d[e].FULLINDEX<=0)return"red1"}if("trump"==i){for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME&&"YES"==d[e].FLIP){if("YES"==d[e].RECOVERED)return"gray3";if("NO"==d[e].RECOVERED)return"red3"}return"none"}if("taxes"==i)for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME){if(d[e].taxDIFF>=100)return"gray4";if(d[e].taxDIFF>=50)return"gray3";if(d[e].taxDIFF>=30)return"gray2";if(d[e].taxDIFF>0)return"gray1";if(d[e].taxDIFF<=-30)return"red4";if(d[e].taxDIFF<=-20)return"red3";if(d[e].taxDIFF<=-10)return"red2";if(d[e].taxDIFF<=0)return"red1"}if("aids"==i)for(var e=0;e<d.length;e++)if(d[e].county==t.properties.COUNTYNAME){if(d[e].aidsDIFF>=100)return"gray4";if(d[e].aidsDIFF>=50)return"gray3";if(d[e].aidsDIFF>=30)return"gray2";if(d[e].aidsDIFF>0)return"gray1";if(d[e].aidsDIFF<=-30)return"red4";if(d[e].aidsDIFF<=-20)return"red3";if(d[e].aidsDIFF<=-10)return"red2";if(d[e].aidsDIFF<=0)return"red1"}}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return r(t,i,s)})),I.append("path").attr("id","state-borders").attr("d",m)});d3.behavior.zoom().on("zoom",function(){I.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),I.selectAll("circle").attr("d",m.projection(F)),I.selectAll("path").attr("d",m.projection(F))});$(".zoom, .switch, #close, .mapSwitch").click(function(){l(),$("#filter input").val(""),$(".district").removeClass("selected"),$("#infobox").hide(),d3.selectAll(".map rect").classed("faded",!1),d3.selectAll(".map rect").classed("active",!1),$(".rightSide").show()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}function n(){c3.generate({bindto:"#gapChart",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["METRO",49736,50015,49872,50514,51827,51155,51901,52657,52146,49111,49577,50929,52258,51607,53349,55295],["OUTSTATE",33821,34451,34921,36379,37199,36578,36261,37122,39694,38253,39549,41267,43923,43857,42696,44266]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"avg personal income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function i(){c3.generate({bindto:"#gapChart2",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["Metro",85681,80606,80092,78879,76225,74937,73821,74855,75324,75953,78877],["Outstate",54366,52031,52356,52312,51615,50994,50809,51399,52487,52721,53743]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"median household income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function o(){c3.generate({bindto:"#taxChart",padding:{top:20,right:60,bottom:20,left:120},data:{columns:[["METRO",2914,3280,3540],["OUTSTATE",1920,2218,2368]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"taxes per capita",position:"outer-middle"}},x:{type:"category",categories:["2009-2010","2011-2012","2012-2013"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function s(){c3.generate({bindto:"#aidChart",padding:{top:20,right:60,bottom:20,left:120},data:{columns:[["Metro",2611],["Outstate",2637]],type:"bar"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"taxes per capita",position:"outer-middle"}},x:{type:"category",categories:["Major State Aid"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}var d=e.incomes;d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,a=d3.select("body").node();e.on("mouseover",function(e,n){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(a);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,n)||""}).on("mousemove",function(e,n){var i=d3.mouse(a);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var o=t(e,n)||"";r.html(o)}).on("mouseout",function(t,e){r.remove()})}},a("#mapHousehold","#infobox","#chart","counties.json","household","mn",null,0),a("#mapPersonal","#infobox","#chart","counties.json","personal","mn",null,0),a("#mapTaxes","#infobox","#chart","counties.json","taxes","mn",null,0),a("#mapAids","#infobox","#chart","counties.json","aids","mn",null,0),a("#mapTrump","#infobox","#chart","counties.json","trump","mn",null,0),a("#mapIndex","#infobox","#chart","counties.json","index","mn",null,0),n(),i(),o(),s()})},{}]},{},[1]);