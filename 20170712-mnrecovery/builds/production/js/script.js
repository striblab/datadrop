!function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=t?t[1]||0:null};var n=$.urlParam("chart");null!=n&&($(".slide").hide(),$("#"+n).show()),d3.json("./data/index.json",function(e,t){function r(e,t,r){var n=0,o="NO",i="NO",a="NO",s="NO",c="NO",d="NO",u="NO",p="";if("personal"==t)for(var m=0;m<l.length;m++)if(l[m].county==e.properties.COUNTYNAME){l[m].pincomeDIFF>=15?p="gray4":l[m].pincomeDIFF>=10?p="gray3":l[m].pincomeDIFF>=5?p="gray2":l[m].pincomeDIFF>=0?p="gray1":l[m].pincomeDIFF<0&&(p="red1"),n=l[m].pincomeDIFF/100;break}if("household"==t||"trump"==t)for(var m=0;m<l.length;m++)if(l[m].county==e.properties.COUNTYNAME){l[m].mincomeDIFF>=9?p="gray4":l[m].mincomeDIFF>=6?p="gray3":l[m].mincomeDIFF>=3?p="gray2":l[m].mincomeDIFF>=0&&(p="gray1"),l[m].mincomeDIFF<=-9?p="red4":l[m].mincomeDIFF<=-6?p="red3":l[m].mincomeDIFF<=-3?p="red2":l[m].mincomeDIFF<0&&(p="red1"),n=l[m].mincomeDIFF/100;break}if("indexed"==t)for(var m=0;m<l.length;m++)if(l[m].county==e.properties.COUNTYNAME){n=l[m].index,1==l[m].poverty&&(o="YES"),1==l[m].jobs&&(i="YES"),1==l[m].household&&(a="YES"),1==l[m].personal&&(s="YES"),1==l[m].hpi&&(c="YES"),1==l[m].unemployment&&(d="YES"),1==l[m].tax&&(u="YES");break}return"indexed"!=t?"<div class='districtName'>"+e.properties.COUNTYNAME+" County</div><div class='population "+p+"'>"+d3.format("+%")(n)+" change</div>":"<div class='districtName'>"+e.properties.COUNTYNAME+" County</div><div class='indicators "+p+"'>"+n+" indicators above avg</div><div class='label'>Poverty:</div><div class='stat'>"+o+"</div><div class='label'>Jobs:</div><div class='stat'>"+i+"</div><div class='label'>Unemployment:</div><div class='stat'>"+d+"</div><div class='label'>Household inc:</div><div class='stat'>"+a+"</div><div class='label'>Personal inc:</div><div class='stat'>"+s+"</div><div class='label'>Housing:</div><div class='stat'>"+c+"</div>"}function n(e,t,n,o,i,a,s,c){function d(e){var t,r,n;if(e&&u!==e){var o=v.centroid(e);t=o[0],r=o[1],n=1,u=e}else t=p/2,r=m/2,n=1,u=null;h.selectAll("path").classed("faded",!1).classed("active",u&&function(e){return e===u})}var u,p=320,m=400;if("us"==a)var f=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==a)var f=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==a)var f=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var v=d3.geo.path().projection(f),g=d3.select(e+" svg").attr("width",p).attr("height",m);g.append("rect").attr("class","background").attr("width",p).attr("height",m);var h=g.append("g");d3.json("shapefiles/"+o,function(e,t){h.append("g").attr("class","states").selectAll("path").data(t.features).enter().append("path").attr("d",v).attr("id",function(e){var t=a+"_"+e.properties.DISTRICT;return t.replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(e){return e.properties.DISTRICT}).attr("class",function(e){if("personal"==i)for(var t=0;t<l.length;t++)if(l[t].county==e.properties.COUNTYNAME){if(l[t].pincomeDIFF>=18)return"gray4";if(l[t].pincomeDIFF>=12)return"gray3";if(l[t].pincomeDIFF>=6)return"gray2";if(l[t].pincomeDIFF>=0)return"gray1";if(l[t].pincomeDIFF<0)return"red1"}if("household"==i)for(var t=0;t<l.length;t++)if(l[t].county==e.properties.COUNTYNAME){if(l[t].mincomeDIFF>=9)return"gray4";if(l[t].mincomeDIFF>=6)return"gray3";if(l[t].mincomeDIFF>=3)return"gray2";if(l[t].mincomeDIFF>=0)return"gray1";if(l[t].mincomeDIFF<=-9)return"red4";if(l[t].mincomeDIFF<=-6)return"red3";if(l[t].mincomeDIFF<=-3)return"red2";if(l[t].mincomeDIFF<0)return"red1"}if("trump"==i){for(var t=0;t<l.length;t++)if(l[t].county==e.properties.COUNTYNAME&&"YES"==l[t].FLIP){if(l[t].mincomeDIFF>=3)return"gray3";if(l[t].mincomeDIFF<3)return"red3"}return"none"}if("indexed"==i)for(var t=0;t<l.length;t++)if(l[t].county==e.properties.COUNTYNAME){if(l[t].index>=5)return"gray5";if(l[t].index>=4)return"gray4";if(l[t].index>=3)return"gray2";if(l[t].index>=0)return"gray1"}}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(e,t){if("index"!=i)return r(e,i,s)})),h.append("path").attr("id","state-borders").attr("d",v)});d3.behavior.zoom().on("zoom",function(){h.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),h.selectAll("circle").attr("d",v.projection(f)),h.selectAll("path").attr("d",v.projection(f))});$(".zoom, .switch, #close, .mapSwitch").click(function(){d(),$("#filter input").val(""),$(".district").removeClass("selected"),$("#infobox").hide(),d3.selectAll(".map rect").classed("faded",!1),d3.selectAll(".map rect").classed("active",!1),$(".rightSide").show()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}function o(){c3.generate({bindto:"#gapChart",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["METRO",49736,50015,49872,50514,51827,51155,51901,52657,52146,49111,49577,50929,52258,51607,53349,55295],["OUTSTATE",33821,34451,34921,36379,37199,36578,36261,37122,39694,38253,39549,41267,43923,43857,42696,44266]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f"),values:[0,2e4,4e4,6e4]},label:{text:"avg personal income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function i(){c3.generate({bindto:"#gapChart2",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["Metro",85681,80606,80092,78879,76225,74937,73821,74855,75324,75953,78877],["Outstate",54366,52031,52356,52312,51615,50994,50809,51399,52487,52721,53743]],type:"line"},color:{pattern:["#333333","#888888","#aaaaaa"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("$,.0f")},label:{text:"median household income",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function a(){c3.generate({bindto:"#regionChart",padding:{top:20,right:60,bottom:20,left:120},data:{columns:[["income % change",.131812242,.083172603,.038747892,.034280751,.033496606,.032609226,.024379787,.008856891]],type:"bar"},color:{pattern:["#333333"]},axis:{rotated:!0,y:{max:.2,min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format("%")}},x:{type:"category",categories:["West Central","Northwest","Northland","Central","Southwest","Minnesota","Twin Cities","Southern"],padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}function s(){c3.generate({bindto:"#jobsChart",padding:{top:20,right:60,bottom:20,left:120},data:{x:"x",columns:[["x",2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Central",0,.02,.04,.04,.07,.09,.11,.12,.11,.07,.06,.08,.09,.12,.14,.15,.17],["Northland",0,-.01,-.01,-.02,-.01,0,.01,.02,.02,-.02,-.02,-.02,-.01,0,.01,.02,.01],["Northwest",0,.01,.02,.02,.03,.04,.04,.02,.03,0,-.01,0,.02,.03,.05,.06,.06],["Southern",0,0,0,0,.01,.02,.03,.03,.03,0,-.01,0,.02,.03,.03,.04,.05],["Southwest",0,0,0,0,0,.01,.02,.03,.03,0,-.01,-.01,-.01,0,.01,.01,0],["West Central",0,0,.02,.03,.04,.05,.07,.07,.08,.05,.06,.06,.08,.1,.11,.12,.13],["Twin Cities",0,0,-.02,-.03,-.02,0,.01,.01,.01,-.04,-.04,-.02,-.01,.01,.03,.05,.06],["Minnesota",0,0,-.01,-.01,0,.01,.03,.03,.03,-.01,-.02,0,.01,.03,.05,.06,.08]],type:"line"},color:{pattern:["#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#fc9272","#cb181d"]},axis:{y:{max:.2,min:-.05,padding:{bottom:0,top:0},tick:{count:6,format:d3.format("%.0"),values:[-.05,0,.05,.1,.15,.2]},label:{text:"jobs % change",position:"outer-middle"}},x:{tick:{values:[2e3,2007,2009,2015],count:5},padding:{left:.25,right:.25}}},regions:[{axis:"x",start:2007,end:2009,class:"hottest"}]})}var l=t.incomes;d3.helper={},d3.helper.tooltip=function(e){return function(t){var r,n=d3.select("body").node();t.on("mouseover",function(t,o){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);e(t,o)||""}).on("mousemove",function(t,o){var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var a=e(t,o)||"";r.html(a)}).on("mouseout",function(e,t){r.remove()})}},n("#mapHousehold","#infobox","#chart","counties.json","household","mn",null,0),n("#mapPersonal","#infobox","#chart","counties.json","personal","mn",null,0),n("#mapIndex","#infobox","#chart","counties.json","indexed","mn",null,0),n("#mapTrump","#infobox","#chart","counties.json","trump","mn",null,0),o(),i(),s(),a()})},{}]},{},[1]);