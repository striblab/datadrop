(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var turkeys = [];

turkeys[0] = ["AR",14366000,16000000,16500000,18000000,18000000,19800000,22000000,24000000,25000000,25000000,25000000,26000000,28000000,30000000,28000000,27000000,28000000,27000000,29500000,29500000,28000000,28000000,28000000,29500000,31000000,29000000,28000000,30500000,29000000,28000000,30000000,27500000,26000000]
turkeys[1] = ["CA",19730000,20500000,21900000,25500000,26500000,30200000,31500000,29000000,26600000,22500000,21000000,22000000,22500000,21000000,19000000,17500000,18000000,18700000,17700000,17500000,15400000,14900000,14900000,16200000,16000000,15000000,15200000,15000000,15500000,13000000,11000000,11500000,10900000]
turkeys[2] = ["CO",0,0,0,0,0,0,0,0,4400000,4700000,4900000,4300000,4800000,3900000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[3] = ["CT",31000,35000,40000,30000,30000,20000,25000,25000,30000,30000,20000,15000,8000,5000,5000,5000,5000,5000,7000,5000,5000,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[4] = ["DE",64000,11000,0,0,0,0,0,0,0,0,0,0,0,0,0,4000,4000,4000,3000,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[5] = ["GA",2582000,2631000,2426000,2432000,2400000,1900000,2010000,1900000,1990000,1470000,1410000,1450000,550000,175000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[6] = ["IL",290000,280000,347000,698000,1700000,3280000,4460000,3120000,3400000,3600000,3800000,3600000,3300000,3500000,3200000,2900000,2900000,2900000,2900000,2800000,2300000,2200000,2200000,2200000,0,0,0,0,0,0,0,0,0]
turkeys[7] = ["IN",6310000,6941000,9370000,13000000,13200000,13200000,13700000,15000000,15400000,14600000,14000000,14200000,14000000,14500000,13500000,13500000,13500000,14000000,13000000,12100000,13200000,13300000,13700000,13600000,14500000,15000000,16000000,16000000,16500000,17500000,19000000,19300000,20000000]
turkeys[8] = ["IA",5800000,6300000,7000000,8500000,7800000,7600000,8800000,8700000,8600000,8400000,8800000,8000000,8000000,7000000,,7500000,7800000,7700000,8400000,8500000,8600000,8500000,8400000,8700000,9000000,0,0,0,0,0,10500000,9100000,11700000]
turkeys[9] = ["KS",100000,275000,150000,231000,227000,324000,400000,560000,730000,1230000,1600000,1600000,1750000,1900000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[10] = ["MD",100000,129000,125000,133000,135000,100000,110000,120000,125000,160000,140000,260000,360000,740000,600000,600000,440000,460000,480000,500000,700000,750000,730000,740000,0,0,0,0,0,0,0,0,0]
turkeys[11] = ["MA",152000,156000,145000,140000,150000,150000,170000,140000,150000,150000,120000,105000,85000,82000,81000,78000,79000,74000,68000,73000,70000,60000,62000,62000,0,0,0,0,0,0,0,0,0]
turkeys[12] = ["MI",2100000,2300000,2700000,3000000,3000000,3500000,4300000,0,0,0,0,0,0,0,0,2700000,3500000,4500000,4800000,4900000,4900000,4600000,4700000,5100000,0,0,0,0,0,5200000,5100000,5200000,5300000]
turkeys[13] = ["MN",28500000,30400000,34200000,40500000,38500000,43100000,45000000,44000000,43000000,42000000,41500000,40500000,43500000,45500000,44500000,43500000,43500000,44000000,44000000,44500000,44500000,44500000,44500000,46500000,48000000,45000000,47000000,46500000,46000000,44000000,45500000,41000000,44000000]
turkeys[14] = ["MO",12000000,12500000,13500000,15500000,16500000,17300000,18000000,20500000,18500000,21000000,20500000,21000000,20500000,21000000,22000000,22000000,23000000,24000000,25500000,22000000,20500000,19700000,19500000,20500000,21000000,18500000,18000000,17500000,17500000,17000000,17000000,19000000,19700000]
turkeys[15] = ["NE",639000,918000,1437000,1942000,1770000,2050000,2090000,2110000,2110000,2550000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[16] = ["NJ",88000,88000,100000,115000,100000,100000,100000,90000,95000,90000,85000,88000,73000,74000,71000,50000,59000,44000,34000,33000,37000,36000,32000,38000,0,0,0,0,0,0,0,0,0]
turkeys[17] = ["NY",329000,314000,343000,448000,343000,400000,480000,490000,480000,480000,500000,505000,520000,510000,500000,490000,510000,510000,520000,570000,600000,620000,630000,630000,0,0,0,0,0,0,0,0,0]
turkeys[18] = ["NC",30400000,31850000,39100000,48350000,47900000,52200000,58000000,58000000,62000000,61000000,60000000,61200000,59500000,53500000,50000000,44000000,41000000,43000000,45500000,42500000,37500000,35500000,37000000,38500000,40000000,35500000,30000000,32000000,36000000,33500000,28500000,31000000,33000000]
turkeys[19] = ["NOD",870000,900000,1000000,1240000,1150000,1280000,1320000,1430000,1250000,1150000,1150000,1750000,2300000,2600000,1800000,1800000,1900000,1600000,1900000,1300000,1000000,1200000,1800000,2000000,0,0,0,0,0,0,0,0,0]
turkeys[20] = ["OH",2800000,2800000,3100000,3400000,3600000,4100000,4750000,4500000,5500000,5600000,6000000,6500000,6800000,6700000,5500000,4700000,4400000,4800000,5700000,5500000,5800000,6000000,5800000,6000000,6000000,5200000,4600000,5000000,5500000,5700000,5100000,5200000,5600000]
turkeys[21] = ["OR",900000,1300000,1510000,1830000,1800000,2100000,2300000,2350000,2400000,520000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[22] = ["PA",6100000,7100000,7800000,8000000,7900000,8400000,8430000,8400000,8800000,8600000,10500000,11500000,11700000,11600000,10500000,9800000,9300000,9500000,9900000,9500000,11500000,10500000,10900000,11000000,11500000,9000000,7400000,7500000,7000000,7000000,6900000,6500000,7000000]
turkeys[23] = ["SC",2194000,2850000,3900000,3950000,5570000,5360000,5500000,6000000,6350000,6550000,5800000,6120000,9100000,11200000,10600000,9500000,9900000,9200000,9900000,12000000,12100000,8000000,9600000,10400000,12500000,11900000,11900000,11500000,12000000,12000000,0,0,0]
turkeys[24] = ["SD",1522000,1723000,1968000,2376000,2370000,2220000,2600000,2700000,2800000,2500000,2500000,2800000,3100000,3600000,3800000,4200000,4300000,4900000,4800000,4300000,4200000,4200000,4000000,4600000,4700000,4500000,4600000,4400000,4600000,4300000,4500000,4300000,4500000]
turkeys[25] = ["UT",2387000,3082000,3390000,3731000,3900000,3590000,3930000,4050000,3750000,3850000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4100000,3200000,4600000,4300000,4100000,4000000,4000000,3600000,4500000]
turkeys[26] = ["VT",0,0,0,0,0,0,0,0,0,0,30000,31000,35000,39000,41000,41000,47000,49000,53000,51000,52000,50000,50000,53000,0,0,0,0,0,0,0,0,0]
turkeys[27] = ["VA",10795000,13066000,14307000,16200000,16300000,16600000,17000000,17300000,19300000,21000000,22000000,24500000,26500000,26000000,26000000,24000000,25500000,24000000,20000000,22500000,19500000,19000000,18600000,18500000,18000000,17000000,17000000,17500000,17000000,15500000,16800000,17000000,17000000]
turkeys[28] = ["WV",2300000,2400000,2220000,2400000,2300000,3000000,3850000,4100000,4100000,4300000,4800000,4800000,4500000,4500000,4300000,4500000,4100000,4100000,4000000,4500000,3200000,2800000,3800000,3700000,3800000,3300000,3100000,3300000,3300000,3100000,3100000,3000000,3300000]
turkeys[29] = ["WI",6120000,6150000,6128000,5450000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
turkeys[30] = ["Other",11700000,12400000,12500000,13316000,19250000,19500000,21600000,26300000,23000000,24600000,30415000,29515000,31217000,31611000,41591000,29809000,28708000,27608000,26807000,24420000,22319000,25250000,27430000,28305000,32988000,35259000,36788000,37500000,39500000,30200000,30500000,29900000,30500000]
turkeys[31] = ["ND",870000,900000,1000000,1240000,1150000,1280000,1320000,1430000,1250000,1150000,1150000,1750000,2300000,2600000,1800000,1800000,1900000,1600000,1900000,1300000,1000000,1200000,1800000,2000000,0,0,0,0,0,0,0,0,0]

var  padding = {
        top: 20,
        right: 40,
        bottom: 20,
        left: 60,
    };

var chartT = c3.generate({
        bindto: '#chart',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
            ["MN",0.17,0.16,0.17,0.17,0.16,0.16,0.16,0.15,0.15,0.15,0.14,0.14,0.14,0.15,0.16,0.16,0.16,0.16,0.16,0.17,0.17,0.18,0.17,0.17,0.18,0.18,0.19,0.19,0.18,0.18,0.19,0.18,0.18],
            ["AR",0.08,0.09,0.08,0.07,0.07,0.08,0.08,0.08,0.09,0.09,0.09,0.09,0.09,0.10,0.10,0.10,0.10,0.10,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.12,0.11,0.12,0.11,0.12,0.13,0.12,0.11],
            ["IN",0.04,0.04,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.04,0.05,0.05,0.05,0.05,0.05,0.06,0.07,0.06,0.07,0.07,0.08,0.08,0.08],
            ["MO",0.07,0.07,0.07,0.06,0.07,0.07,0.06,0.07,0.06,0.07,0.07,0.07,0.07,0.07,0.08,0.08,0.09,0.09,0.09,0.08,0.08,0.08,0.08,0.08,0.08,0.07,0.07,0.07,0.07,0.07,0.07,0.08,0.08],
            ["NC",0.18,0.17,0.19,0.20,0.20,0.20,0.21,0.20,0.21,0.21,0.21,0.21,0.20,0.18,0.18,0.16,0.15,0.16,0.17,0.16,0.15,0.14,0.14,0.14,0.15,0.14,0.12,0.13,0.14,0.14,0.12,0.13,0.14],
            ["VA",0.06,0.07,0.07,0.07,0.07,0.06,0.06,0.06,0.07,0.07,0.08,0.08,0.09,0.09,0.09,0.09,0.09,0.09,0.07,0.08,0.08,0.08,0.07,0.07,0.07,0.07,0.07,0.07,0.07,0.06,0.07,0.07,0.07],
            ["CA",0.12,0.11,0.11,0.11,0.11,0.12,0.11,0.10,0.09,0.08,0.07,0.08,0.07,0.07,0.07,0.06,0.07,0.07,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.04],
            ["CO",0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.02,0.02,0.02,0.01,0.02,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["GA",0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["IL",0.00,0.00,0.00,0.00,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["IA",0.03,0.03,0.03,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.02,0.00,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.00,0.00,0.00,0.00,0.00,0.04,0.04,0.05],
            ["KS",0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["MI",0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.01,0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.00,0.00,0.00,0.00,0.00,0.02,0.02,0.02,0.02],
            ["NE",0.00,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["ND",0.01,0.00,0.00,0.01,0.00,0.00,0.00,0.01,0.00,0.00,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["OH",0.02,0.02,0.01,0.01,0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02],
            ["OR",0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["PA",0.04,0.04,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.03],
            ["SC",0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.03,0.04,0.04,0.04,0.04,0.03,0.04,0.04,0.05,0.03,0.04,0.04,0.05,0.05,0.05,0.05,0.05,0.05,0.00,0.00,0.00],
            ["SD",0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02],
            ["UT",0.01,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.02,0.01,0.02,0.02,0.02,0.02,0.02,0.02,0.02],
            ["WV",0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.02,0.01,0.01,0.02,0.02,0.02,0.02,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01],
            ["WI",0.04,0.03,0.03,0.02,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00],
            ["Other",0.07,0.07,0.06,0.06,0.08,0.07,0.08,0.09,0.08,0.09,0.11,0.10,0.10,0.10,0.15,0.11,0.11,0.10,0.10,0.09,0.09,0.10,0.11,0.11,0.12,0.14,0.15,0.15,0.16,0.13,0.13,0.13,0.13]
        ],
        type: 'line'
    },
    point: { show: false },
    // legend: { show: false },
    color:  {  pattern: ['#D7263D', '#4F5D75', '#2E294E', '#1B998B', '#C5D86D', '#EF798A', '#7D82B8', '#613F75', '#9EADC8', '#ff0000', '#D6D84F', '#6A2E35', '#BE8A60', '#35281D', '#756D54', '#E56399', '#7FD1B9', '#523745', '#4F359B', '#99907D', '#B5BA72', '#2D3142', '#EF8354', '#F46036'] },
    axis: {
      y: {
            // max: 1,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('%')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                values: [1984, 1992, 2000, 2008, 2016],
                count: 5,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              var birds;

              console.log(d);

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              // console.log(title);

              for (var k=0; k < turkeys.length; k++){
                for (var r=0; r < turkeys[k].length; r++){
                if (turkeys[k][0] == name){
                  birds = k;
                  break;
                  }
                }
                // if (birds == "") { break; }
              }

              if (name != "Undecided/Other") { pollster = ""; }

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "<td class='value pollster' colspan='2'>" + d3.format(",")(turkeys[birds][d[i].index + 1]) + " turkeys</td>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }

});


function spitLegend() {

var names = ["Top Producers","Arkansas","California","Colorado","Georgia","Illlinois","Indiana","Iowa","Kansas","Michigan","Minnesota","Missouri","Nebraska","North Carolina","North Dakota","Ohio","Oregon","Pennsylvania","South Carolina","South Dakota","Utah","Virginia","West Virginia","Wisconsin","Other States"];

d3.select('#dd ul').selectAll('li')
    .data(["All","AR","CA","CO","GA","IL","IN","IA","KS","MI","MN","MO","NE","NC","ND","OH","OR","PA","SC","SD","UT","VA","WV","WI","Other"])
    .enter().append('li')
    .attr('data-id', function (id) { return id; })
    .attr("class","clickyButton")
    .html(function (id,i) { return names[i]; })
    .each(function (id) {
        // d3.select(this).style('background-color', chartT.color(id));
    })
    .on('mouseover', function (id) {
        // chartD.focus(id);
        // chartM.focus(id);
    })
    .on('mouseout', function (id) {
        // chartD.revert();
        // chartM.revert();
    })
    .on('click', function (id) {
    	chartT.hide();
        chartT.show(id);

        if (id == "All"){ chartT.hide(); chartT.show("MN"); chartT.show("NC"); chartT.show("AR"); chartT.show("IN"); chartT.show("MO"); chartT.show("VA"); }
    });

    chartT.hide(); chartT.show("MN"); chartT.show("NC"); chartT.show("AR"); chartT.show("IN"); chartT.show("MO"); chartT.show("VA");

        path = d3.selectAll("#chart path");

      var totalLength = path.node().getTotalLength();

    path
      .attr("stroke-dasharray", totalLength + " " + totalLength)
      .attr("stroke-dashoffset", totalLength)
      .transition()
        .duration(2000)
        .ease("linear")
        .attr("stroke-dashoffset", 0);
}

spitLegend();
      
      function DropDown(el)  { 
        this.dd = el;
        this.placeholder = this.dd.children('span');
        this.opts = this.dd.find('ul.dropdown > li');
        this.val = '';
        this.index = -1;
        this.initEvents();
      }
      DropDown.prototype =  { 
        initEvents : function()  { 
          var obj = this;

          obj.dd.on('click', function(event) { 
            $(this).toggleClass('active');
            return false;
          });

          obj.opts.on('click',function() { 
            var opt = $(this);
            obj.val = opt.text();
            obj.index = opt.index();
            obj.placeholder.text(obj.val);
          });
        },
        getValue : function()  { 
          return this.val;
        },
        getIndex : function()  { 
          return this.index;
        }
      }

      $(function()  { 

        var dd = new DropDown( $('#dd') );
        var dd2 = new DropDown( $('#ddY') );

        $(document).click(function()  { 
          // all dropdowns
          $('.wrapper-dropdown-1').removeClass('active');
        });

      });
},{}]},{},[1])