!function t(e,r,o){function c(i,l){if(!r[i]){if(!e[i]){var n="function"==typeof require&&require;if(!l&&n)return n(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var s=r[i]={exports:{}};e[i][0].call(s.exports,function(t){var r=e[i][1][t];return c(r||t)},s,s.exports,t,e,r,o)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)c(o[i]);return c}({1:[function(t,e,r){function o(t){this.dd=t,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}d3.csv("./data/scores.csv",function(t){return{id:t.SchoolID,district:t.districtname_new,school:t.SCHOOLNAME_NEW,type:t.grds,metro:t.Metro7county,region:t.Location,location:t.SchoolLocationCountyName,county:t.SchoolLocationCountyName,year:String(t.datayr),subject:t.subject,profpct:+t.PctProf,freelunch:+t.FreeLunch,povertypct:+t.PctPoverty,povertycat:t.PovertyCategory,minoritypct:+t.pctminority,overallcat:t.Overall,predicted:+t.Predicted,residual:+t.residual,category:t.CategoryName,enrollment:t.K12Enr}},function(t,e){function r(t,e){var r=0,o=0,c=0,a=0;if(1==e)for(var i=0;i<h.length;i++)"M"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"Medium"==h[i].povertycat&&c++,"High"==h[i].povertycat&&o++,"Low"==h[i].povertycat&&a++);else for(var i=0;i<h.length;i++)h[i].district==t&&"M"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"Medium"==h[i].povertycat&&c++,"High"==h[i].povertycat&&o++,"Low"==h[i].povertycat&&a++);$("#failP").html(d3.format("%")(o/r)),$("#metP").html(d3.format("%")(c/r)),$("#betterP").html(d3.format("%")(a/r))}function o(t,e){var r=0,o=0,c=0,a=0;if(1==e)for(var i=0;i<h.length;i++)"M"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"About as expected"==h[i].category&&c++,"Falling short"==h[i].category&&o++,"Better than expected"==h[i].category&&a++);else for(var i=0;i<h.length;i++)h[i].district==t&&"M"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"About as expected"==h[i].category&&c++,"Falling short"==h[i].category&&o++,"Better than expected"==h[i].category&&a++);$("#failM").html(d3.format("%")(o/r)),$("#metM").html(d3.format("%")(c/r)),$("#betterM").html(d3.format("%")(a/r))}function c(t,e){var r=0,o=0,c=0,a=0;if(1==e)for(var i=0;i<h.length;i++)"R"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"About as expected"==h[i].category&&c++,"Falling short"==h[i].category&&o++,"Better than expected"==h[i].category&&a++);else for(var i=0;i<h.length;i++)h[i].district==t&&"R"==h[i].subject&&"16 to 17"==h[i].year&&(r++,"About as expected"==h[i].category&&c++,"Falling short"==h[i].category&&o++,"Better than expected"==h[i].category&&a++);$("#failR").html(d3.format("%")(o/r)),$("#metR").html(d3.format("%")(c/r)),$("#betterR").html(d3.format("%")(a/r))}function a(t,e){var r=[];r[0]="x";var o=1,c=[],a=[];c[0]="Reading",a[0]="Math",dataRP=0,dataMP=0;for(var i=!1,l=["M Score",null,null,null,null],n=["M Predicted",null,null,null,null],s=["R Score",null,null,null,null],d=["R Predicted",null,null,null,null],y=["x","R Score","R Precicted","M Score","M Predicted"],u=0;u<h.length;u++)t==h[u].school&&e==h[u].district&&(i=!0,"R"==h[u].subject&&(c[o]=h[u].profpct,r[o]=h[u].year,o++,dataRP=h[u].predicted));s[1]=c[c.length-1],d[2]=dataRP,o=1;for(var u=0;u<h.length;u++)t==h[u].school&&e==h[u].district&&(i=!0,"M"==h[u].subject&&(a[o]=h[u].profpct,o++,dataMP=h[u].predicted));if(l[3]=a[a.length-1],n[4]=dataMP,c.length>a.length?a[a.length]=0:c.length<a.length&&(c[c.length]=0),1==i){var p={top:20,right:60,bottom:20,left:70},m=c3.generate({bindto:"#chart",padding:p,data:{x:"x",columns:[y,s,d,l,n],line:{connectNull:!0},groups:[["M Score","M Predicted","R Score","R Predicted"]],type:"bar",labels:{format:{"M Score":function(t,e,r,o){if(null!=t)return Math.round(100*t)+"%"},"M Predicted":function(t,e,r,o){if(null!=t)return Math.round(100*t)+"%"},"R Score":function(t,e,r,o){if(null!=t)return Math.round(100*t)+"%"},"R Predicted":function(t,e,r,o){if(null!=t)return Math.round(100*t)+"%"}}}},legend:{show:!1},point:{size:4},tooltip:{show:!1},order:null,transition:{duration:1300},color:{pattern:["#4C4C39","#858565","#BF603C","#E3B5A4"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,format:d3.format("%"),values:[0,.25,.5,.75,1]}},x:{type:"category",tick:{multiline:!0}}},grid:{y:{lines:[]}}});d3.select("#chart svg").append("text").attr("x",170).attr("y",20).attr("class","mobilekill").style("text-anchor","right").text("Proficiency to predicted comparison")}m.load({columns:[["R Score",null,null,null,null],["R Predicted",null,null,null,null],["M Score",null,null,null,null],["M Predicted",null,null,null,null]]}),m.load({columns:[y,y,s,d,l,n]})}var i,l,n,s,d,h=e,y="",u="All Districts";d3.select("#listedSchools").selectAll(".district").data(h.filter(function(t){return"16 to 17"==t.year&&"R"==t.subject})).enter().append("div").attr("class",function(t){for(var e,r=0;r<h.length;r++)h[r].school==t.school&&h[r].district==t.district&&"M"==h[r].subject&&"16 to 17"==h[r].year&&(e=h[r].category);return"switch district "+("Better than expected"==e&&"Better than expected"==t.category?"both":"Better than expected"==t.category?"reading":"math")}).attr("categoryr",function(t){return"About as expected"==t.category?"expected":"Better than expected"==t.category?"better":"Falling short"==t.category&&"worse",t.category}).attr("categoryo",function(t){var e;return"About as expected"==t.categoryO?e="expected":"Better than expected"==t.categoryO?e="better":"Falling short"==t.categoryO&&(e="worse"),e}).attr("categoryp",function(t){var e;return"High"==t.povertycat?e="High":"Medium"==t.povertycat?e="Medium":"Low"==t.povertycat&&(e="Low"),e}).attr("categorym",function(t){for(var e,r=0;r<h.length;r++)h[r].school==t.school&&h[r].district==t.district&&"M"==h[r].subject&&"16 to 17"==h[r].year&&(e=h[r].category);return e}).attr("district",function(t){return t.district}).attr("id",function(t){return"s"+t.id}).attr("latitude",function(t){return t.latitude}).attr("longitude",function(t){return t.longitude}).on("click",function(t){$("#poverty,#freelunch").removeClass("gray5"),$("#poverty,#freelunch").removeClass("gray4"),$("#poverty,#freelunch").removeClass("gray3"),$("#poverty,#freelunch").removeClass("gray2"),$("#poverty,#freelunch").removeClass("gray1"),$("#categoryR,#categoryM").removeClass("better"),$("#categoryR,#categoryM").removeClass("worse"),$("#categoryR,#categoryM").removeClass("expected"),$("#categoryR,#categoryM").removeClass("nan"),a(t.school,t.district);for(var e=0;e<h.length;e++)h[e].school==t.school&&h[e].district==t.district&&"M"==h[e].subject&&"16 to 17"==h[e].year&&($("#categoryM").html(h[e].category),$("#categoryR").html(t.category),$("#mPCT").html(d3.format("%")(h[e].profpct)+" proficiency"),$("#rPCT").html(d3.format("%")(t.profpct)+" proficiency"),$("#mPCTP").html(d3.format("%")(h[e].predicted)+" predicted"),$("#rPCTP").html(d3.format("%")(t.predicted)+" predicted"),"About as expected"==h[e].category&&(d="expected"),"Falling short"==h[e].category&&(d="worse"),"Better than expected"==h[e].category&&(d="better"),"Not enough students tested"==h[e].category&&(d="nan"));var r=t.freelunch/t.enrollment;r>=.7?n="gray5":r>=.5?n="gray4":r>=.4?n="gray3":r>=.2?n="gray2":r>=0&&(n="gray1"),t.minoritypct>=.7?l="gray5":t.minoritypct>=.5?l="gray4":t.minoritypct>=.4?l="gray3":t.minoritypct>=.2?l="gray2":t.minoritypct>=0&&(l="gray1"),t.povertypct>=.7?i="gray5":t.povertypct>=.5?i="gray4":t.povertypct>=.4?i="gray3":t.povertypct>=.2?i="gray2":t.povertypct>=0&&(i="gray1"),"About as expected"==t.category&&(s="expected"),"Falling short"==t.category&&(s="worse"),"Better than expected"==t.category&&(s="better"),"Not enough students tested"==t.category&&(s="nan"),$("#schoolname").html(t.school),$("#district").html(t.district),$("#enrolled").html(d3.format(",")(t.enrollment)),$("#type").html(t.type),$("#location").html(" ("+t.location+")"),$("#category").html(t.category),$("#freelunch").html(d3.format("%")(r)),$("#poverty").html(d3.format("%")(t.povertypct)),$("#minority").html(d3.format("%")(t.minoritypct)),$("#freelunch").addClass(n),$("#poverty").addClass(i),$("#categoryR").addClass(s),$("#categoryM").addClass(d)}).html(function(t){return y!=t.district&&(y=t.district),t.school+"<span class='hideme'>("+y+")</span>"}),$("#districtSelect").click(function(){}),$(".district").click(function(){$("li.district").removeClass("selected"),$(".cell").removeClass("selected2"),$(this).addClass("selected"),$("#thisDistrict").html($(this).text()),r($(this).text(),!1),o($(this).text(),!1),c($(this).text(),!1),u=$(this).text()}),$(".cell").click(function(){$(".cell").removeClass("selected2"),$(this).addClass("selected2"),$(".switch").hide(),"All Districts"==u?"R"==$(this).attr("type")?$(".switch[categoryr='"+$(this).attr("data")+"']").show():"M"==$(this).attr("type")?$(".switch[categorym='"+$(this).attr("data")+"']").show():"O"==$(this).attr("type")?$(".switch[categoryo='"+$(this).attr("data")+"']").show():"P"==$(this).attr("type")&&$(".switch[categoryp='"+$(this).attr("data")+"']").show():"R"==$(this).attr("type")?$(".switch[categoryr='"+$(this).attr("data")+"'][district='"+u+"']").show():"M"==$(this).attr("type")?$(".switch[categorym='"+$(this).attr("data")+"'][district='"+u+"']").show():"O"==$(this).attr("type")?$(".switch[categoryo='"+$(this).attr("data")+"'][district='"+u+"']").show():"P"==$(this).attr("type")&&$(".switch[categoryp='"+$(this).attr("data")+"'][district='"+u+"']").show()}),$("#filter_box").on("keyup search",function(t){$(".switch").hide();var e=$("#filter_box").val();$(".switch").each(function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&$(this).show()})}),$("#filter2 input").on("keyup search",function(t){$(".district").hide();var e=$("#filter2 input").val();$(".district").each(function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&$(this).show()})}),$(".switch").click(function(){$(".switch").removeClass("selected"),$(this).addClass("selected"),$("#instructions").hide(),$("#infobox,#chart,#chartLabel").show()}),$("#infobox,#chart,#chartLabel").hide(),$("#instructions").show(),$("#schoolname").html(h[4].school),$("#district").html(h[4].district),$("#enrolled").html(h[4].enrollment),$("#freelunch").html(d3.format("%")(h[4].freelunch/h[4].enrollment)),$("#type").html(h[4].type),$("#location").html(" ("+h[4].location+")"),$("#categoryR").html(h[4].category),$("#categoryM").html(h[5].category),$("#poverty").html(d3.format("%")(h[4].povertypct)),$("#povertycat").html(h[4].povertycat),$("#minority").html(d3.format("%")(h[4].minoritypct)),$("#poverty").addClass("gray3"),$("#freelunch").addClass("gray3"),$("#categoryR,#categoryM").addClass("better"),$("#mPCT").html(d3.format("%")(h[4].profpct)+" proficiency"),$("#rPCT").html(d3.format("%")(h[5].profpct)+" proficiency"),$("#mPCTP").html(d3.format("%")(h[4].predicted)+" predicted"),$("#rPCTP").html(d3.format("%")(h[5].predicted)+" predicted"),r("",!0),o("",!0),c("",!0),$(".zoom").on("click keyup search",function(){return u="All Districts",$("#infobox,#chart,#chartLabel").hide(),$("#instructions").show(),$(".switch, li.district").removeClass("selected"),$(".switch").show(),$("li.district").show(),$("#listedSchools").hide(),$("#thisDistrict").html("All Districts"),$("#schoolsList").animate({scrollTop:0},800),$("#listedSchools").animate({scrollTop:0},800),$("#filter input, #filter2 input").val(""),$("#enrolled").html(h[4].enrollment),$("#poverty,#freelunch").removeClass("gray5"),$("#poverty,#freelunch").removeClass("gray4"),$("#poverty,#freelunch").removeClass("gray3"),$("#poverty,#freelunch").removeClass("gray2"),$("#poverty,#freelunch").removeClass("gray1"),$("#categoryR,#categoryM").removeClass("better"),$("#categoryR,#categoryM").removeClass("worse"),$("#categoryR,#categoryM").removeClass("expected"),$("#categoryR,#categoryM").removeClass("nan"),$("#mPCT").html("75% math proficiency"),$("#rPCT").html("65% reading proficiency"),$("#mPCTP").html("57% predicted"),$("#rPCTP").html("54% predicted"),$("#categoryR").html(h[4].category),$("#categoryM").html(h[5].category),$("#schoolname").html(h[4].school),$("#district").html(h[4].district),$("#type").html(h[4].type),$("#location").html(" ("+h[0].location+")"),$("#category").html(h[4].category),$("#poverty").html(d3.format("%")(h[4].povertypct)),$("#povertycat").html(h[4].povertycat),$("#minority").html(d3.format("%")(h[4].minoritypct)),$("#freelunch").addClass("gray3"),$("#poverty").addClass("gray3"),r("",!0),o("",!0),c("",!0),$("#categoryR,#categoryM").addClass("better"),$(".cell").removeClass("selected2"),a("A.C.G.C. SECONDARY"),!1}),a("A.C.G.C. SECONDARY"),$(".switch").first().addClass("selected")}),o.prototype={initEvents:function(){var t=this;t.dd.on("click",function(t){return $(this).toggleClass("active"),!1}),t.opts.on("click",function(){var e=$(this);t.val=e.text(),t.index=e.index(),t.placeholder.text(t.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}},$(function(){new o($("#dd")),new o($("#ddY"));$(document).click(function(){$(".wrapper-dropdown-1").removeClass("active")})})},{}]},{},[1]);